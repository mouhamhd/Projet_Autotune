/*
 * processing.h
 *
 *  Created on: 11 janv. 2021
 *      Author: robin
 */

#ifndef SRC_PROCESSING_H_
#define SRC_PROCESSING_H_

#include "./kissFFT/kiss_fft.h"
#include <stdio.h>
#include <math.h>
#include "timers/timers.h"
#include "printers/printers.h"
#include "data_file.h"


/* Mathematical macros */
#define POWER_FFT 10
#define SIZE_FFT (1<<POWER_FFT)   // FIXME Assert SIZE_FFT = 2^POWER_FFT
#define M_PI   3.14159265358979323846
#define SFFT 1024

#define C_MINOR_SIZE 56

// Core methods 
int processing(int16_t* sig_out,int16_t* sig,int64_t size);
void benchmark(int16_t* sig_out,int16_t* sig,int64_t size);


// Additional user methods
int find_max(int16_t* in,int16_t* c_table, int64_t size);
void abs2(int16_t* re, int16_t* im,int64_t size);
int16_t synthetize_pitch(int16_t* out, int16_t pitch, int64_t dur,int16_t phase);
int16_t fpsin(int16_t i);
int16_t fpsin2(int16_t x);
int16_t mul_int16_int16(int16_t x,int16_t y);

#endif /* SRC_PROCESSING_H_ */
